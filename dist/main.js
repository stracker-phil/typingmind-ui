(()=>{"use strict";const t=class{static getItem(t){return localStorage.getItem(t)}static setItem(t,e){localStorage.setItem(t,e)}},e=new class{#t;#e;#s;constructor(){const t=document.currentScript;t?this.#t=new URL(t.src):(console.warn("Unable to determine script URL."),this.#t=null)}get nocache(){return!!this.#t&&!!this.#t.searchParams.get("nocache")}get origin(){return void 0===this.#e&&(this.#t?this.#e=`${this.#t.origin}${this.#t.pathname.substring(0,this.#t.pathname.lastIndexOf("/")+1)}`:this.#e=""),this.#e}get theme(){if(void 0===this.#s){const e=t.getItem("custom-theme");e?this.#s=e:this.#t?this.#s=this.#t.searchParams.get("theme")||"":this.#s=""}return this.#s}set theme(e){this.#s=e,t.setItem("custom-theme",e)}};class s{static#i=!1;#n;#r;#a=!1;#o="";#c="";#h=null;#l=null;constructor(t,e){this.#n=t,this.#r=e}static bypassCache(t){s.#i=t}set script(t){this.#o!==t&&(this.#o=t,this.#a=!0)}set style(t){this.#c!==t&&(this.#c=t,this.#a=!0)}get scriptElement(){return this.#h}get styleElement(){return this.#l}unload(){this.#d(),this.#u(),this.#c="",this.#o="",this.#a=!1}async load(){if(!this.#a)return;this.#d(),this.#u();const t=[];this.#o&&t.push(this.#m()),this.#c&&t.push(this.#p()),await Promise.all(t),this.#a=!1}#d(){this.#h&&(document.head.removeChild(this.#h),this.#h=null)}#u(){this.#l&&(document.head.removeChild(this.#l),this.#l=null)}#b(t){let e=`${this.#r}${t}`;return s.#i&&(e+=`?nocache=${Date.now()}`),e}#m(){return new Promise(((t,e)=>{this.#h=document.createElement("script"),this.#h.id=`${this.#n}-script`,this.#h.src=this.#b(this.#o),this.#h.onload=t,this.#h.onerror=e,document.head.appendChild(this.#h)}))}#p(){return new Promise(((t,e)=>{this.#l=document.createElement("link"),this.#l.id=`${this.#n}-style`,this.#l.rel="stylesheet",this.#l.href=this.#b(this.#c),this.#l.onload=t,this.#l.onerror=e,document.head.appendChild(this.#l)}))}}const i=s,n={init:"theme:init",cleanup:"theme:cleanup",refresh:"theme:refresh"},r=class{#v(t){if(!Object.values(n).includes(t))throw new Error(`Invalid theme event: ${t}`)}dispatch(t,e=null){let s;this.#v(t),null!==e?(console.log("DISPATCH WITH DETAILS",t,{detail:e}),s=new CustomEvent(t,{detail:e})):(console.log("DISPATCH NO DETAILS",t),s=new CustomEvent(t)),document.dispatchEvent(s)}observe(t,e){this.#v(t),document.addEventListener(t,e)}unobserve(t,e){this.#v(t),document.removeEventListener(t,e)}},a="custom-theme",o=class{#y;#g;#f;#S=null;constructor(t,e,s){this.#y=new i("theme",t.origin),this.#g=e,this.#f=s}async apply(t){this.#S&&this.#E(),t&&await this.#T(t)}async#T(t){this.#S=t,this.#y.style=`theme/${t}.css`,this.#y.script=`theme/${t}.js`;try{await this.#y.load(),this.#g.dispatch(n.init,{iconReplacer:this.#f}),document.body.classList.add(a)}catch(e){console.error(`Failed to load theme: ${t}`,e),this.#E()}}#E(){this.#S&&(this.#g.dispatch(n.cleanup),this.#y.unload(),document.body.classList.remove(a),this.#f&&(this.#f.config=null),this.#S=null)}},c="active-button";function h(t){if(!t)return"";const e=t.dataset.elementId;return e&&e.startsWith("workspace-tab-")?e.replace("workspace-tab-",""):""}function l(t){return document.querySelectorAll('[data-element-id="workspace-bar"] button[data-element-id]').forEach(t)}const d=class{#g;#w="";#C=null;constructor(t){this.#g=t,this.onButtonClick=this.onButtonClick.bind(this),this.refreshCurrentPage()}get activeSlug(){return this.#w}#I(){this.activeSlug?document.body.setAttribute("data-app-page",this.activeSlug):document.body.removeAttribute("data-app-page"),this.#C&&(this.#C.classList.add(c),this.#g.dispatch(n.refresh,{activeTab:this.activeSlug}))}set activeTab(t){this.#C&&this.#C.classList.remove(c);const e=h(t);e?(this.#C=t,this.#w=e,setTimeout((()=>this.#I()),100)):this.#C=null}refreshCurrentPage(){this.activeTab=null,l((t=>{t.classList.contains("text-white")&&h(t)&&(this.activeTab=t)}))}onButtonClick(t){this.activeTab=t.currentTarget}start(){l((t=>{t.addEventListener("click",this.onButtonClick)}))}stop(){l((t=>{t.removeEventListener("click",this.onButtonClick)}))}};class u{#L=[];#A=new Map;#M={};#U=new Map;#H;#O;constructor(){this.#H=null,this.#O=null}set config(t){t?.length?this.#k(t):this.#R()}set state(t){const e=new Set;for(const[s,i]of Object.entries(t))this.#M[s]!==i&&(this.#M[s]=i,e.add(s));this.#B(e)}#k(t){this.#R(),this.#L=t,this.#P(),this.#$()}#R(){for(const[t,e]of this.#A)e.reset();this.#L=[],this.#A.clear(),this.#U.clear(),this.#_()}#$(){this.#H&&this.#_(),this.#H=new MutationObserver((t=>this.#D(t))),this.#H.observe(document.body,{childList:!0,subtree:!0,attributes:!0})}#_(){this.#H&&(this.#H.disconnect(),this.#H=null)}#N(t,e){if(t.dependencies)for(const s of t.dependencies)this.#U.has(s)||this.#U.set(s,new Set),this.#U.get(s).add(e)}#B(t){const e=new Set;for(const s of t){const t=this.#U.get(s);t&&t.forEach((t=>e.add(t)))}for(const t of e)t.apply()}#D(t){clearTimeout(this.#O),this.#O=setTimeout((()=>{const e=new Set;for(const s of t)"attributes"===s.type?e.add(s.target):"childList"===s.type&&s.addedNodes.forEach((t=>{t.nodeType===Node.ELEMENT_NODE&&e.add(t)}));e.forEach((t=>this.#x(t)))}),50)}#x(t){if(!t.innerHTML.includes("<svg"))return;const e=t.querySelectorAll("svg");for(const t of e)this.#W(t)}#W(t){if(!t.__theme){const e=this.#j(t);if(!e)return;t.__theme=e}t.__theme.apply()}#j(t){const e=t.cloneNode(!0),s=this.#q(t);let i="";if(!s)return null;const n={apply:()=>{if(!s)return;const e=s.replace(t,this.#M);e&&i!==e&&(i=e,this.#F(t,e),this.#A.set(t,t.__theme))},reset:()=>{t.innerHTML=e.innerHTML,this.#V(t,e),this.#A.delete(t)}};return this.#N(s,n),n}#q(t){const e=t.outerHTML.toLowerCase();return this.#L.find((t=>e.includes(t.match.toLowerCase())))||null}#F(t,e){const s=document.createElement("div");s.innerHTML=e;const i=s.firstElementChild;i.hasAttribute("viewBox")&&t.setAttribute("viewBox",i.getAttribute("viewBox")),t.innerHTML=i.innerHTML}#V(t,e){for(;t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);for(const s of e.attributes)t.setAttribute(s.name,s.value)}#P(){this.#x(document.body)}}const m="sidebar-closed",p="sidebar-open",b=class{#g;#z=null;#H=null;constructor(t){this.#g=t,this.#z=document.getElementById("nav-handler"),this.#z?this.#G():console.error('Element with ID "nav-handler" not found')}get sidebarWidth(){if(!this.#z)return 0;const t=window.getComputedStyle(this.#z).getPropertyValue("--current-sidebar-width").trim();return parseInt(t)}get isClosed(){return 0===this.sidebarWidth}#G(){setTimeout((()=>{document.body.classList.remove(m,p),document.body.classList.add(this.isClosed?m:p),this.#g.dispatch(n.refresh,{sidebarOpen:!this.isClosed})}),100)}#J(t){for(const e of t)if("attributes"===e.type&&"style"===e.attributeName){this.#G();break}}start(){this.#z&&(this.#H=new MutationObserver(this.#J.bind(this)),this.#H.observe(this.#z,{attributes:!0,attributeFilter:["style"]}))}stop(){this.#H&&(this.#H.disconnect(),this.#H=null)}};class v{#K;#g;#Q;#X;#Y;#f;constructor(t){if(v.instance)return v.instance;v.instance=this,this.#K=t,this.#g=new r,this.#f=new u,this.#Q=new o(this.#K,this.#g,this.#f),this.#X=new d(this.#g),this.#Y=new b(this.#g),i.bypassCache(this.#K.nocache),this.#X.start(),this.#Y.start(),this.#Z()}get theme(){return this.#K.theme}set theme(t){this.#K.theme=t,this.#Z()}#Z(){this.#Q.apply(this.#K.theme)}}const y=new v(e);window.themeApi=y})();