@layer base, theme;

@layer base {
    :root {
        /* Light theme variables */
        --bg-workspace: #ffffff;
        --bg: #ffffff;
        --hover: #f3f4f6;
        --user-msg-bg: #8c63f7;
        --hover-overlay: #9067f812;
        --border-outline: rgb(126, 34, 206);
        --text-dark: #2f2e33;
        --text-light: #84838d;
        --side-bar-bg: #2E2055FF;
        --side-bar-btn: #9570f8;
        --side-bar-hover: #795bc7;
        --placeholder-text: #f8f6fb;
        --gradient-stop-1: #e59dfe;
        --gradient-stop-2: #5b02cd;
        --chat-item-bg: rgba(117, 89, 197, 0.6);
        --brand-name-gradient-stop-1: rgb(80, 35, 217);
        --brand-name-gradient-stop-2: rgb(217, 35, 189);
        --btn-bg: #ffffff;
        --light-bg: #8c63f740;
    }

    .dark {
        /* Dark theme variable overrides */
        --bg-workspace: #1A1625;
        --bg: rgb(108, 106, 96);
        --hover: #373244;
        --btn-bg: rgb(24 24 27);
    }
}

@layer theme {
    .custom-theme {
        /* Common button styles */
        [data-element-id='model-setting-button'],
        [data-element-id='regenerate-button'],
        [data-element-id='share-button'],
        #elements-in-action-buttons [data-element-id='prompt-library-button'],
        [data-element-id='prompt-library-button'],
        [data-element-id='new-chat-button'],
        [data-element-id='reset-chat-button'],
        [data-element-id='list-more-button'],
        [data-element-id='select-character-button'],
        [data-element-id='clear-context-button'] {
            background: var(--btn-bg);
            color: var(--user-msg-bg);
            border: solid 1px var(--user-msg-bg);
            transition: background 0.2s ease, color 0.2s ease, border 0.2s ease;

            &:hover {
                background: var(--user-msg-bg);
                color: white;
                border: solid 1px var(--user-msg-bg);
            }
        }

        /* Model setting button styles */
        [data-element-id='model-setting-button'] {
            background: radial-gradient(
                circle at 10% 20%,
                var(--gradient-stop-1) 0%,
                var(--gradient-stop-2) 72.4%
            );
            color: white;

            &:focus {
                outline: none;
                box-shadow: 0 0 0 1.6px var(--border-outline);
            }

            &:hover {
                background: radial-gradient(
                    circle at 10% 20%,
                    var(--gradient-stop-2) 0%,
                    var(--gradient-stop-1) 72.4%
                );
            }
        }

        /* Action buttons styles */
        [data-element-id='more-options-button'],
        [data-element-id='send-button'] {
            background: var(--user-msg-bg);

            &:hover {
                background: var(--border-outline);
            }
        }

        /* Plugin switch styles */
        [data-element-id='plugins-switch-enabled'] {
            background: var(--user-msg-bg);

            &:focus {
                outline: none;
                box-shadow: 0 0 0 2px white, 0 0 0 4px var(--user-msg-bg);
            }
        }

        [data-element-id='plugins-switch-disabled']:focus {
            box-shadow: 0 0 0 2px white, 0 0 0 4px var(--user-msg-bg);
        }

        /* Sidebar styles */
        [data-element-id='side-bar-background'],
        [data-element-id='sidebar-beginning-part'] {
            background: var(--side-bar-bg);
        }

        [data-element-id='new-chat-button-in-side-bar'] {
            background: var(--side-bar-btn);
            transition: background 0.2s ease;

            &:hover {
                background: var(--side-bar-hover);
            }

            * {
                color: white;
            }
        }

        [data-element-id='settings-button'],
        [data-element-id='nav-user-profile-button'] {
            background: transparent;
            transition: background 0.2s ease;

            &:hover {
                background: var(--side-bar-hover);
            }

            * {
                color: white;
            }
        }

        [data-element-id='selected-chat-item'] {
            background: var(--chat-item-bg);
        }

        [data-element-id='custom-chat-item']:hover {
            background: var(--chat-item-bg);
        }

        [data-element-id='side-bar-footer'] {
            background: var(--chat-item-bg);
        }

        /* Search bar styles */
        [data-element-id='search-chats-bar'] {
            background: var(--side-bar-bg);
            border: solid 0.5px gray;

            &::placeholder {
                color: var(--placeholder-text);
                font-size: 14px;
            }

            &:focus {
                outline: none;
                border: solid 0.5px var(--placeholder-text);
                box-shadow: 0 0 0 1px var(--placeholder-text);
            }
        }

        [data-element-id='select-chats-symbol'],
        [data-element-id='create-new-folder'],
        [data-element-id='tag-search-button'] {
            color: var(--placeholder-text);
        }

        [data-element-id='select-chats-button'] {
            background: var(--side-bar-btn);
            transition: background 0.2s ease;

            &:hover {
                background: var(--side-bar-hover);
            }

            * {
                color: white;
            }
        }

        /* Settings button styles */
        [data-element-id='language-button'],
        [data-element-id='dark-mode-button'],
        [data-element-id='sound-mode-button'],
        [data-element-id='cloud-button'] {
            background: var(--side-bar-bg);

            &:hover {
                background: var(--side-bar-hover);
            }
        }

        [data-element-id='login-button'] {
            background: var(--side-bar-btn);
            transition: background 0.2s ease;

            &:hover {
                background: var(--side-bar-hover);
            }

            * {
                color: white;
            }
        }

        /* Prompt library styles */
        [data-element-id='prompt-library-modal-title'] {
            color: var(--side-bar-bg);
        }

        [data-element-id='prompt-library-tabs'].selected {
            color: var(--user-msg-bg);
            border-bottom: 2px solid var(--user-msg-bg);
        }

        [data-element-id='prompt-library-num-prompts'].selected {
            background: var(--light-bg);
            color: var(--user-msg-bg);
        }

        [data-element-id='add-prompt-button'] {
            color: var(--user-msg-bg);
        }

        /* Input focus styles */
        [data-element-id='search-your-prompts']:focus,
        [data-element-id='add-new-prompt-input']:focus,
        [data-element-id='add-new-prompt-description-input']:focus,
        [data-element-id='add-new-prompt-title-input']:focus,
        [data-element-id='ai-characters-title-input']:focus,
        [data-element-id='ai-characters-description-input']:focus,
        [data-element-id='ai-characters-pictureurl-input']:focus,
        [data-element-id='ai-characters-system-instruction-input']:focus,
        [data-element-id='ai-characters-welcome-message-input']:focus,
        [data-element-id='profile-setting-image-url']:focus,
        [data-element-id='profile-setting-information-input']:focus,
        [data-element-id='context-limit-select']:focus,
        [data-element-id='model-select']:focus,
        [data-element-id='new-system-instruction']:focus,
        [data-element-id='search-input']:focus,
        [data-element-id='sort-characters']:focus,
        [data-element-id='search-characters']:focus,
        [data-element-id='add-new-prompt-tags-input'] input:focus,
        [data-element-id='one-training-example-block'] textarea:focus,
        [data-element-id='plugin-url-input']:focus,
        [data-element-id='chat-folder'] textarea:focus {
            outline: none;
            box-shadow: 0 0 0 1.6px var(--border-outline);
        }

        /* Button styles */
        [data-element-id='add-new-prompt-button'],
        [data-element-id='prompt-library-use-button'],
        [data-element-id='close-modal-button'],
        [data-element-id='update-prompt-button'],
        [data-element-id='create-chatacter'],
        [data-element-id='profile-setting-save-button'],
        [data-element-id='save-ai-character-button'],
        [data-element-id='save-model-settings-button'],
        [data-element-id='continue-import-plugin-button'] {
            background: var(--user-msg-bg);
            transition: background 0.2s ease;

            &:hover {
                background: var(--side-bar-bg);
            }
        }

        /* AI character styles */
        [data-element-id='ai-characters'].selected {
            background: var(--light-bg);
            border: solid var(--side-bar-bg);
            color: var(--side-bar-bg);

            &:hover {
                background: var(--light-bg);
            }
        }

        [data-element-id='one-ai-character-block'] {
            transition: all 0.2s ease-in-out;

            &:hover {
                box-shadow: 0 0 0 3px var(--light-bg);
            }
        }

        [data-element-id='add-ai-character'] {
            color: var(--user-msg-bg);
            transition: all 0.2s ease-in-out;

            &:hover {
                color: var(--side-bar-bg);
            }
        }

        [data-element-id='ai-characters-add-training-examples'] {
            color: var(--user-msg-bg);
        }

        /* Plugin styles */
        [data-element-id='create-new-plugin-button'],
        [data-element-id='import-plugin-button'] {
            color: var(--user-msg-bg);
            transition: all 0.2s ease-in-out;

            &:hover {
                color: var(--side-bar-bg);
            }
        }

        [data-element-id='plugin-item-setting-tab'].selected {
            color: var(--user-msg-bg);
            transition: all 0.2s ease-in-out;

            &:hover {
                color: var(--side-bar-bg);
            }
        }


        /* Chat folder styles */
        [data-element-id='chat-folder'] {
            &:hover,
            &:focus-within {
                background: var(--light-bg);
            }
        }

        /* Button styles */
        [data-element-id='change-character-button'],
        [data-element-id='reset-character-button'],
        [data-element-id='voice-input-button'],
        [data-element-id='upload-document-button'],
        [data-element-id='search-shortcut-button'],
        [data-element-id='mention-agent-button'],
        [data-element-id='prompt-library-small-button'],
        [data-element-id='output-settings-button'] {
            background: transparent;
            color: var(--user-msg-bg);
            transition: background 0.5s ease, color 0.5s ease;

            &:hover {
                background: transparent;
                color: var(--dark-hover);
            }
        }

        /* Search action styles */
        [data-element-id='search-action-open-ai-characters']:hover,
        [data-element-id='search-action-open-prompt-library']:hover,
        [data-element-id='search-action-switch-chat-model']:hover {
            background: var(--hover-overlay);
        }

        /* Chat action button styles */
        [data-element-id='edit-title-button']:hover,
        [data-element-id='delete-chat-button']:hover,
        [data-element-id='move-to-folder-button']:hover,
        [data-element-id='archive-chat-button']:hover,
        [data-element-id='export-chat-button']:hover {
            background: var(--hover-overlay);
        }

        /* Message styles */
        [data-element-id='user-message'] {
            background: var(--user-msg-bg);
            color: white;

            &::selection {
                background: var(--dark-bg);
            }
        }

        [data-element-id='ai-response'] {
            background: var(--dark-hover);
            padding: 0.5rem 1rem;
            color: white;
            border-radius: 12px;
        }

        [data-element-id='response-block']:hover {
            background: var(--hover-overlay);
        }

        [data-element-id='document-type'] {
            color: var(--text-light);
        }

        /* Chat title styles */
        [data-element-id='current-chat-title'] {
            color: var(--text-dark);
        }

        [data-element-id='current-chat-info'] {
            color: var(--text-light);
        }

        /* Dark mode overrides */
        .dark & {
            body {
                background: var(--bg) !important;
            }

            [data-element-id='workspace-bar'] {
                background: var(--bg-workspace) !important;
            }

            [data-element-id='chat-space-background'],
            [data-element-id='chat-space-end-part'],
            [data-element-id='chat-space-beginning-part'],
            [data-element-id='width-adjust-bar'] {
                background: var(--bg);
            }

            [data-element-id='width-adjust-bar']:hover {
                background: var(--hover);
                color: white;
            }

            [data-element-id='chat-input-textbox'] {
                background: var(--hover);
            }

            [data-element-id='response-block']:hover {
                background: var(--hover-overlay);
            }

            [data-element-id='model-setting-button'],
            [data-element-id='brand-tagline'] {
                color: white;
            }

            [data-element-id='regenerate-button'],
            [data-element-id='share-button'],
            #elements-in-action-buttons [data-element-id='prompt-library-button'],
            [data-element-id='prompt-library-button'],
            [data-element-id='new-chat-button'],
            [data-element-id='reset-chat-button'],
            [data-element-id='list-more-button'],
            [data-element-id='select-character-button'],
            [data-element-id='clear-context-button'] {
                background: var(--btn-bg);
                color: var(--user-msg-bg);
                border: solid 1px var(--user-msg-bg);

                &:hover {
                    background: var(--user-msg-bg);
                    color: white;
                    border: solid 1px var(--user-msg-bg);
                }
            }

            [data-element-id='prompt-library-modal-title'],
            [data-element-id='select-characters-modal-title'] {
                color: var(--user-msg-bg);
            }

            [data-element-id='ai-characters'].selected {
                background: var(--light-bg);
                border: solid var(--user-msg-bg);
                color: white;

                &:hover {
                    background: var(--light-bg);
                }
            }

            [data-element-id='create-new-plugin-button'],
            [data-element-id='import-plugin-button'] {
                &:hover {
                    color: var(--chat-item-bg);
                }
            }

            [data-element-id='plugin-item-setting-tab'].selected {
                color: var(--user-msg-bg);

                &:hover {
                    color: var(--side-bar-bg);
                }
            }

            [data-element-id='select-chats-symbol'],
            [data-element-id='create-new-folder'],
            [data-element-id='tag-search-button'] {
                color: var(--placeholder-text);
            }

            [data-element-id='available-prompts-count'],
            [data-element-id='available-characters-count'] {
                color: rgb(226 232 240);
            }

            [data-element-id='voice-input-button'],
            [data-element-id='upload-document-button'],
            [data-element-id='search-shortcut-button'],
            [data-element-id='mention-agent-button'],
            [data-element-id='prompt-library-small-button'],
            [data-element-id='output-settings-button'] {
                background: transparent;
                color: var(--user-msg-bg);
                transition: background 0.2s ease, color 0.2s ease;

                &:hover {
                    background: var(--user-msg-bg);
                    color: white;
                }
            }

            [data-element-id='change-character-button'],
            [data-element-id='reset-character-button'] {
                &:hover {
                    color: var(--user-msg-bg);
                }
            }
        }

        /* Elements with empty rule sets in the original CSS */
        [data-element-id='model-setting-info'],
        [data-element-id='current-character-description'],
        [data-element-id='replace-only-button'],
        [data-element-id='cancel-edit-message-button'],
        [data-element-id='pop-up-modal'],
        [data-element-id='prompt-library-modal-description'],
        [data-element-id='prompt-library-tabs'],
        [data-element-id='add-new-prompt-title'],
        [data-element-id='prompt-library-one-prompt-block'],
        [data-element-id='user-profile-button'],
        [data-element-id='user-profile-image'],
        [data-element-id='model-setting-button-main'],
        [data-element-id='temperature-info'],
        [data-element-id='plugins-button'],
        [data-element-id='plugins-info-button'] {
            /* These elements had empty rule sets in the original CSS */
            /* Add any necessary styles here if needed */
        }
    }
}

[data-element-id="chat-space-middle-part"] {
    padding-bottom: 0;
    
    /* Hide the Typing Mind branding */
    > .relative > .relative > .flex.justify-center {
        display: none;
    }
}